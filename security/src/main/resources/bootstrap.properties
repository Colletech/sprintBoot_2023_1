# Nombre de la aplicacion
spring.application.name = security-service
spring.cloud.config.enabled = true
spring.cloud.config.uri = http://localhost:7559

#Puerto asignado al proyecto
server.port = ${PORT:${SERVER_PORT:0}}

#Conexion a mongo en nube
spring.data.mongodb.uri = mongodb+srv://speed21:a8CHorRjmXNIxpZf@cluster0.igxdzg5.mongodb.net/?retryWrites=true&w=majority
spring.data.mongodb.database = security

#Deshabilita la conexion a bd local
spring.autoconfigure.exclude = org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration

#Configuracion JPA
spring.jpa.generate-ddl = true
spring.jpa.hibernate.ddl-auto = update

# Palabra secreta
token.palabra.secreta = C0ll3te|4

#Habilitar la anulación de beans
spring.main.allow-bean-definition-overriding = true

spring.cloud.compatibility-verifier.enabled = false

eureka.client.fetch-registry = true
eureka.client.registry-with-eureka = true
eureka.client.service-url.default-zone = http://localhost:8761/eureka
eureka.client.instance.instance-id = ${spring.application.name}:${spring.application.instance_id:${random.value}}

# circuitbreaker
resilience4j.circuitbreaker.instances.iglesiaCB.registerHealthIndicator: true
resilience4j.circuitbreaker.instances.iglesiaCB.slidingWindowSize: 10
resilience4j.circuitbreaker.instances.iglesiaCB.permittedNumberOfCallsInHalfOpenState: 3
resilience4j.circuitbreaker.instances.iglesiaCB.slidingWindowType: TIME_BASED
resilience4j.circuitbreaker.instances.iglesiaCB.minimumNumberOfCalls: 4
resilience4j.circuitbreaker.instances.iglesiaCB.waitDurationInOpenState: 5s
resilience4j.circuitbreaker.instances.iglesiaCB.failureRateThreshold: 50
resilience4j.circuitbreaker.instances.iglesiaCB.eventConsumerBufferSize: 10

resilience4j.circuitbreaker.instances.municipalityCB.registerHealthIndicator: true
resilience4j.circuitbreaker.instances.municipalityCB.slidingWindowSize: 10
resilience4j.circuitbreaker.instances.municipalityCB.permittedNumberOfCallsInHalfOpenState: 3
resilience4j.circuitbreaker.instances.municipalityCB.slidingWindowType: TIME_BASED
resilience4j.circuitbreaker.instances.municipalityCB.minimumNumberOfCalls: 4
resilience4j.circuitbreaker.instances.municipalityCB.waitDurationInOpenState: 5s
resilience4j.circuitbreaker.instances.municipalityCB.failureRateThreshold: 50
resilience4j.circuitbreaker.instances.municipalityCB.eventConsumerBufferSize: 10

resilience4j.circuitbreaker.instances.todosCB.registerHealthIndicator: true
resilience4j.circuitbreaker.instances.todosCB.slidingWindowSize: 10
resilience4j.circuitbreaker.instances.todosCB.permittedNumberOfCallsInHalfOpenState: 3
resilience4j.circuitbreaker.instances.todosCB.slidingWindowType: TIME_BASED
resilience4j.circuitbreaker.instances.todosCB.minimumNumberOfCalls: 4
resilience4j.circuitbreaker.instances.todosCB.waitDurationInOpenState: 5s
resilience4j.circuitbreaker.instances.todosCB.failureRateThreshold: 50
resilience4j.circuitbreaker.instances.todosCB.eventConsumerBufferSize: 10